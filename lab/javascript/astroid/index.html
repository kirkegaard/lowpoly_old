<!DOCTYPE html>
<html>
    <head>
        <style type="text/css" media="screen">
            body {
                margin: 0;
                overflow:hidden;
                background-color: #000;
            }
        </style>
    </head>
<body>
<canvas id="canvas"></canvas>
<script>
    (function() {

    window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       ||
              window.webkitRequestAnimationFrame ||
              window.mozRequestAnimationFrame    ||
              window.oRequestAnimationFrame      ||
              window.msRequestAnimationFrame     ||
              function( callback ){
                window.setTimeout(callback, 1000 / 60);
              };
    })();

    var WIDTH  = window.innerWidth
      , HEIGHT = window.innerHeight
      , HALF_WIDTH    = WIDTH / 2
      , HALF_HEIGHT   = HEIGHT / 2
      , canvas        = document.getElementById('canvas')
      , context       = canvas.getContext('2d')
      , elms          = new Array()
      , elms_count    = 25
      , rint          = 30
      , color         = 'rgba(220,220,220,.9)'
      ;

    init();
    requestAnimFrame(animate);

    function animate() {
        draw();
        setTimeout(function() {
            requestAnimFrame(animate);
        }, 1000 / rint);
    }

    function init() {
        canvas.height = HEIGHT;
        canvas.width  = WIDTH;

        for(var i = 0; i < elms_count; i++) {
            elms[i] = new Elm();
            elms[i].draw();
        }
    }

    function draw() {
        context.clearRect(0,0,WIDTH,HEIGHT);

        for(var i = 0; i < elms_count; i++) {
            elms[i].move();
            elms[i].draw();
        }
    }

    function getRandom(min, max) {
        return Math.random() * (max - min) + min;
    }

    function Elm() {
        this.x = getRandom(0, WIDTH);
        this.y = getRandom(0, HEIGHT);
        this.direction = {
            x: Math.floor(getRandom(-1, 1.9))
          , y: Math.floor(getRandom(-1, 1.9))
        };
        this.sides = Math.floor(getRandom(3, 7));
        this.radius = getRandom(25, 150);
        this.speed = getRandom(0.5, 2);

        this.draw = function() {
            context.strokeStyle = context.fillStyle = color;
            context.beginPath();
            context.moveTo(this.x, this.y);

            for(var i = 0; i < this.sides; i++) {
                var bx = by = 0;
                bx = this.x + Math.cos(i / this.sides * Math.PI * 2) * this.radius / 2;
                by = this.y + Math.sin(i / this.sides * Math.PI * 2) * this.radius / 2;
                context.lineTo(bx, by);
            }

            context.lineTo(this.x, this.y);

            if(this.radius < 65) {
                context.fill();
            } else {
                context.stroke();
            }
        }

        this.move = function() {
            if(this.x > WIDTH) {
                this.direction.x = -1;
            } else if (this.x < 0) {
                this.direction.x = 1;
            }

            if(this.y > HEIGHT) {
                this.direction.y = -1;
            } else if (this.y < 0) {
                this.direction.y = 1;
            }

            this.x += this.speed * this.direction.x;
            this.y += this.speed * this.direction.y;

            // this.x += 0.5;
            // this.y += 0.5;
        }
        this.reset = function() {}

        this.getX = function() { return this.x; }
        this.getY = function() { return this.y; }
    }

    })();
    </script>
</body>
</html>